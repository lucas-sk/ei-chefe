---
import { cn } from '@/lib/utils';

interface Props extends astroHTML.JSX.HTMLAttributes {}

const { className, ...props } = Astro.props;

interface Testimonial {
  id: string;
  name: string;
  youtubeId: string;
}

const testimonials: Testimonial[] = [
  {
    id: '1',
    youtubeId: '8oU8QOeZDjc',
    name: 'Dra Karen Geraldina'
  },
  {
    id: '2',
    youtubeId: 'vPc2TNvS39I',
    name: 'Kauezada do Espetinho'
  },
  {
    id: '3',
    youtubeId: 'ezf8ERVWyq8',
    name: 'Glenda Barros'
  }
];
---

<section
  class={cn('py-20 px-4 bg-background mb-[116px] md:mb-[120px]', className)}
  {...props}
>
  <div class="max-w-7xl mx-auto">
    <h2
      class="italic font-light text-[48px] leading-[120%] text-black mb-14 text-center"
    >
      O que os clientes falam
    </h2>

    <div
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-5xl mx-auto"
    >
      {
        testimonials.map(testimonial => (
          <div key={testimonial.id} class="group relative">
            {/* YouTube Shorts embed with vertical aspect ratio */}
            <div class="relative w-full aspect-[9/16] overflow-hidden rounded-lg shadow-lg hover:shadow-2xl transition-shadow duration-300">
              <iframe
                src={`https://www.youtube.com/embed/${testimonial.youtubeId}?controls=1&rel=0&playsinline=0&modestbranding=0&autoplay=0`}
                title={`Depoimento de ${testimonial.name}`}
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen
                loading="lazy"
                class="absolute inset-0 w-full h-full"
              />
            </div>
            {/* Name below video */}
            <p class="mt-3 text-center font-semibold text-foreground">
              {testimonial.name}
            </p>
          </div>
        ))
      }
    </div>
  </div>
</section>
